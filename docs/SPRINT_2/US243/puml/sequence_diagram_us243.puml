@startuml
'skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "DroneTech" as EDT
participant ":ListDroneUI" as UI
participant ":ListDroneController" as CTRL
participant ":Persistence" as PERS
participant ":RepositoryFactory" as REPOS
participant "repositoryFactory\n:RepositoryFactory" as REPOS_SINGLETON
participant "modelRepository\n:ModelRepository" as MOD_REPO
participant "droneRepository\n:DroneRepository" as DRN_REPO

activate EDT

        EDT -> UI : asks to list all active \ndrones from a model in the inventory
        activate UI
            UI -> CTRL : getDroneModelList()
                        activate CTRL
                            CTRL -> PERS : getRepositoryFactory
                            activate PERS
                            PERS --> CTRL : repositoryFactory
                            deactivate PERS
                            CTRL -> REPOS : getInstance()
                            activate REPOS
                                REPOS --> CTRL: repositories
                            deactivate REPOS

                            CTRL -> REPOS_SINGLETON : getModelRepository()
                            activate REPOS_SINGLETON
                                REPOS_SINGLETON --> CTRL: modelRepository
                            deactivate REPOS_SINGLETON

                            CTRL -> MOD_REPO : getModelList()
                            activate MOD_REPO
                                MOD_REPO --> CTRL : modelList
                            deactivate MOD_REPO
                            CTRL --> UI : modelList
                        deactivate CTRL
                   UI --> EDT : shows the list off all drone models and ask to select one
                           deactivate UI
                     EDT -> UI : selets one
                        activate UI
            UI --> UI : keepData(droneModel)



    UI --> EDT : requests confirmation
    deactivate UI
    EDT -> UI : confirms
    activate UI
        UI -> CTRL : getDrnModelList(droneModel)
        activate CTRL
                                        CTRL -> PERS : getRepositoryFactory
                                                                    activate PERS
                                                                    PERS --> CTRL : reposirotyFactory
                                                                    deactivate PERS
                                        CTRL -> REPOS: getInstance()
                                        activate REPOS

                                               REPOS --> CTRL: repositories

                                        deactivate REPOS

                                        CTRL -> REPOS_SINGLETON: getDroneRepository()
                                        activate REPOS_SINGLETON

                                               REPOS_SINGLETON --> CTRL: droneRepository
                                        deactivate REPOS_SINGLETON
                                                        CTRL -> DRN_REPO: getDrnModelList(droneModel)
                                                        activate DRN_REPO
                                                        DRN_REPO --> CTRL: drnModelList
                                                        deactivate DRN_REPO
            deactivate DRN_REPO

            CTRL --> UI: drnModelList
            deactivate CTRL
            UI --> EDT: show drone model list and displays operation success
    deactivate UI

deactivate EDT

@enduml