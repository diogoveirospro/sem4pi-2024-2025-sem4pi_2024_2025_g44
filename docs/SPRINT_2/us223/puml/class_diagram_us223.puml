@startuml
set separator none

package "Domain" #DDDDDD {

    package "DTO" #DDDDDD {
        class CustomerDTO <<DTO>> {

        }

        class CustomerRepresentativeDTO <<DTO>> {

        }
    }

    package "Mapper" #DDDDDD {
        class CustomerListMapper <<Mapper>> {
            + toDTO(customer) : CustomerDTO
            + customersToDTO(customers) : List<CustomerDTO>
        }

        class CustomerRepresentativeListMapper <<Mapper>> {
            + toDTO(representative) : CustomerRepresentativeDTO
            + representativesToDTO(representatives) : List<CustomerRepresentativeDTO>
        }
    }

    package "Repository" #DDDDDD {
        Interface CustomerRepository <<Repository>> {
            + getCustomers() : List<Customer>
        }
        Interface CustomerRepresentativeRepository <<Repository>> {
            + getRepresentativesOfCustomer(customer, representative): List<CustomerRepresentative>
            + editEmailOfRepresentative(representative, email)
            + editPhoneNumberOfRepresentative(representative, phoneNumber)
        }
        Interface Repositories <<Repository>> {
            - Repositories()
            + getInstance() : Repositories
            + getCustomerRepository() : CustomerRepository
            + getRepresentativeRepository() : CustomerRepresentativeRepository
        }
    }

    class Customer <<Entity>> {
        + Customer (name, address, vat, status, type)
    }
    class CustomerRepresentative <<Entity>> {
        + CustomerRepresentative (name, position, email, phoneNumber)
        + getRepresentativesOfCustomer(customer): List<CustomerRepresentative>
        + setEmail(email)
        + setPhoneNumber(phoneNumber)
    }

    class Address <<Value Object>> {

    }
    class VatNumber <<Value Object>> {

    }
    enum CustomerStatus <<Value Object>> {

    }
    enum CustomerType <<Value Object>> {

    }
    class Position <<Value Object>> {

    }
    class Name <<Value Object>> {

    }
    class Email <<Value Object>> {

    }
    class PhoneNumber <<Value Object>> {

    }

    enum CustomerRepresentativeStatus <<Value Object>>{
    }
}

package "UI" #DDDDDD {
    class EditCustomerRepresentativeUI <<UI>> {

    }
}

package "Controller" #DDDDDD {
    class EditCustomerRepresentativeController <<Controller>> {
        + listRepresentativesOfAGivenCustomer(customer)
        + listAllCustomers()
        + EditInformationOfACustomerRepresentative(email,phoneNumber)
    }
}

package "repositories.impl.jpa" #DDDDDD {
    class CustomerRepositoryJpaImpl <<Repository>> {
    }
    class CustomerRepresentativeRepositoryJpaImpl <<Repository>> {
    }
}

' Relações entre as classes

'CustomerRepositoryJpaImpl --> *
CustomerRepositoryJpaImpl ..|> CustomerRepository

'CustomerRepresentativeRepositoryJpaImpl --> *
CustomerRepresentativeRepositoryJpaImpl ..|> CustomerRepresentativeRepository

'Customer --> *
Customer --> "1..*" CustomerRepresentative : representative
Customer --> "1" VatNumber : vat
Customer --> "1" Address : address
Customer --> "1" CustomerStatus : status
Customer --> "1" CustomerType : type
Customer ----> "1" Name : name

'Representative --> *
CustomerRepresentative --> "1" Position : position
CustomerRepresentative --> "1" Name : name
CustomerRepresentative --> "1" Email : email
CustomerRepresentative --> "1" PhoneNumber : phoneNumber
CustomerRepresentative --> "1" CustomerRepresentativeStatus : status


'Repositories --> *
Repositories --> Repositories : instance
Repositories --> CustomerRepository : getCustomerRepository
Repositories --> CustomerRepresentativeRepository : getRepresentativeRepository

'CustomerRepository --> *
CustomerRepository --> "0..*" Customer : customers

'CustomerRepresentativeRepository --> *
CustomerRepresentativeRepository --> "0..*" CustomerRepresentative : representatives

'ListCustomerRepresentativesUI --> *
EditCustomerRepresentativeUI ..> EditCustomerRepresentativeController

'ListCustomerRepresentativesController --> *
EditCustomerRepresentativeController ..> Repositories : repositories
EditCustomerRepresentativeController ..> CustomerListMapper : customerListDTO
EditCustomerRepresentativeController ..> CustomerRepresentativeRepository : representativeRepository
EditCustomerRepresentativeController ..> CustomerRepository : customerRepository
EditCustomerRepresentativeController ..> CustomerRepresentativeListMapper : representativeListDTO

'CustomerDTO --> *
CustomerDTO ..> CustomerListMapper : customerDTO

'CustomerRepresentativeDTO --> *
CustomerRepresentativeDTO ..> CustomerRepresentativeListMapper : representativeDTO
@enduml