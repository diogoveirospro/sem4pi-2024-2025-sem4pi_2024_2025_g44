# US251 â€“ Planning

## 1. Context

The goal of this task is to provide a high-level grammar for describing drone figures and shows.
This task is included in Sprint 2 and is being implemented for the first time.

### 1.1 List of Issues

* **Analysis:** âœ… Done
* **Design:** âœ… Done
* **Implementation:** ðŸ“Œ Backlog
* **Testing:** ðŸ“Œ Backlog

---

## 2. Requirements

**As** a PO,
**I want** a high-level neutral language,
**So that** I can describe figures to be specified.

**Acceptance Criteria:**

* ***US251.1*** The grammar must support the definition of shows with an associated list of figures.
* ***US251.2*** It must allow the specification of figures with properties such as position, velocity, distance, and geometric shapes.
* ***US251.3*** It must support mathematical expressions to compute properties.
* ***US251.4*** It must validate 3D vectors, decimal numbers, and identifiers.
* ***US251.5*** It must allow the definition of sections (e.g., `before`, `after`, `group`) to organize actions.
* ***US251.6*** It must support actions such as movement, rotation, light activation/deactivation, and pauses.

**Input Templates**

The following proposal templates were used as the basis for the grammar definition:

- [Show Proposal model 01 v1.0.txt](files/sample_DSL_figures/sample_DSL_figure_1.txt)
- [Show Proposal model 02 v1.0.txt](files/sample_DSL_figures/sample_DSL_figure_2.txt)
- [Show Proposal model 03 v1.0.txt](files/sample_DSL_figures/sample_DSL_figure_3.txt)

There are no specific output templates for the show has they are simply a list of figures.

---

## 3. Analysis

The grammar was designed to describe shows and figures in a modular and extensible way.
It is composed of two main parts:

1. **Show Definition:**
   Allows the specification of a show with a list of figures.

2. **Figure Definition:**
   Allows detailed descriptions of figures, including declarations of properties (e.g., position, velocity) and actions.

The grammar uses terminal categories such as `DIGIT`, `DOUBLENUMBER`, and `IDENTIFIER` to validate fields.
Recursive rules are used for lists and mathematical expressions, ensuring flexibility and precision.

---

## 4. Design

This section presents the complete grammar developed to support **US251 â€“ Description of Drone Shows and Figures**.
The grammar is written in context-free notation and models the essential elements required to describe drone-based figures, actions, and show compositions.

The grammar was designed to:

* Represent drone shows and figures clearly and modularly.
* Support the declaration and validation of physical properties such as position, velocity, distance, and geometric shapes.
* Enable the use of mathematical expressions to compute or derive properties dynamically.
* Validate domain-specific data types, including three-dimensional vectors, decimal numbers, and symbolic identifiers.
* Allow logical structuring of actions through sections such as `before`, `after`, and `group`.
* Support drone-specific actions such as movement, rotation, lighting control, and timed pauses.
* Ensure reusability and scalability through modular definitions and figure references.

The grammar is modular, with each non-terminal symbol corresponding to a specific conceptual part of the figure specification language.
It leverages terminal categories such as `DIGIT`, `DOUBLENUMBER`, and `IDENTIFIER` to enforce syntactic correctness and data integrity.
Recursive and optional patterns are used to support lists, nesting of commands, and flexible composition.

### Full Grammar

#### Show Definition

```
showDefinition   --> "show" ID? ";" figureList;

figureList       --> figureRef { "," figureRef } ";";

figureRef        --> ID;

ID               --> [a-zA-Z][a-zA-Z0-9]*;
```

#### Figure Definition

```
DSL            --> "version" VERSIONNUMBER ";" declarations statements;

VERSIONNUMBER  --> DIGIT "." DIGIT "." TWO_DIGITS;

declarations   --> { declaration };

declaration    --> "DroneType" IDENTIFIER ";"
                | "Position" IDENTIFIER "=" vector ";"
                | "Velocity" IDENTIFIER "=" ( "PI" "/" DOUBLENUMBER | DOUBLENUMBER ) ";"
                | "Distance" IDENTIFIER "=" DOUBLENUMBER ";"
                | shapeDecl;

shapeDecl      --> shapeType IDENTIFIER "(" argumentList ")" ";";
shapeType      --> "Line" | "Rectangle" | "Circle" | "Circumference";

argumentList   --> expression { "," expression };
statements     --> { statement };

statement      --> section | action ";";

section        --> "before" { statement } "endbefore"
                | "after" { statement } "endafter"
                | "group" { statement } "endgroup";

action         --> IDENTIFIER "." actionType "(" argumentList? ")"
                | IDENTIFIER "." "lightsOff"
                | "pause" "(" expression ")";

actionType     --> "move" | "movePos" | "rotate" | "lightsOn";

expression     --> term { ("+" | "-") term };
term           --> factor { ("*" | "/") factor };
factor         --> DOUBLENUMBER
                | "PI"
                | IDENTIFIER
                | vector
                | "(" expression ")";

vector         --> "(" DOUBLENUMBER "," DOUBLENUMBER "," DOUBLENUMBER ")";

TWO_DIGITS     --> DIGIT DIGIT;
DIGIT          --> [0-9];
DOUBLENUMBER   --> DIGIT+ ("." DIGIT+)?;

IDENTIFIER     --> [a-zA-Z][a-zA-Z0-9]*;
```

This formal specification serves as the foundation for implementing validation tools and generating structured descriptions of drone shows and figures.

Let me know if youâ€™d like a diagram version, test cases, or EBNF reformatted for tooling compatibility.
